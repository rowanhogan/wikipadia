function applyIcon(type) {
  const link = document.querySelector("link[rel*='icon']");

  if (type === "dark") {
    link.href =
      "data:image/png;base64,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";
  } else {
    link.href =
      "data:image/png;base64,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";
  }
}

var dmQuery = window.matchMedia("(prefers-color-scheme: dark)");
var lmQuery = window.matchMedia("(prefers-color-scheme: light)");

// Check on initial load if dark mode is already there. Apply the dark
// mode favicon if true.
if (dmQuery.matches) {
  applyIcon("dark");
}

lmQuery.addListener(function() {
  if (lmQuery.matches) {
    applyIcon("light");
  } else if (dmQuery.matches) {
    applyIcon("dark");
  }
});
